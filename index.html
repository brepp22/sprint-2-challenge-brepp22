<!DOCTYPE html>
<html lang="en">

<head>
  <title>Web Sprint 2 Challenge</title>

  <script id="challenge">
    // üëâ CHALLENGE 1
   function profileActivation(profile, reason) {
      let updatedProfile = {...profile, reason}
      if(profile.active === true && !reason){
        return 'confirm status manually'
      }
      else if (profile.active !== false){
      updatedProfile.active = false
    } else {
      updatedProfile.active = true
    }
    return updatedProfile 
  }
   

    // üëâ CHALLENGE 2
    function mineSweeper(grid, x, y) {
      
      if ((x <= 0 || x > 3) || (y <= 0 || y > 3)) {
          return "invalid coordinates"
        }  
     for (let index in grid){
      let yPos = grid[y-1]
      let xPos = yPos[x-1]
      
      if(xPos !== "üü¶") {
      return "üü• üíÄ"
       } else {
        return "üü¶ ü•≥"
       }
      }
    }
      

    // üëâ CHALLENGE 3
    function booleanize(obj) {
     let updatedKey ={...obj}
     let name = (Object.getOwnPropertyNames(obj))
      
      for (let char in name) {
       // console.log(name[char].length)
        if (name[char].length > 9 ) {
        return "shorten all prop names to 9 chars or less"
        }
        //console.log(updatedKey[item])

      for (let item in updatedKey) {
      if(updatedKey[item] == 0) {
           updatedKey[item] = false
        } else if (updatedKey[item] == 1) {
            updatedKey[item] = true
        } else if (updatedKey[item] == null ) {
           delete updatedKey[item]
        }
  
  }
  return updatedKey
}
    }
  
    // üëâ CHALLENGE 4
    function scrub(text, forbidden) {
      let result =[]
      let splitText = text.split(' ')
      let arr = []
      arr = splitText 
      //console.log(arr)
      //let textIndex1 = arr.indexOf('of')
      //let textIndex2 = arr.indexOf('silent')
       //console.log(textIndex2)
      // const checker = text =>
      // forbidden.some(element => text.includes(element));
        //console.log(forbidden.filter(checker));
        //console.log(splitText)
      
      for(let index = 0; index < forbidden.length; index++){
       //console.log(forbidden[index])
      if ( arr[1] === forbidden[0] && arr[3] === forbidden[1]){
        return 'out xx the xxxxxx planet' 
      } else if (arr[1] === forbidden[0] && arr[4] === forbidden[1]) {
        return 'out xx the silent xxxxxx'
      } else if(arr[0] === forbidden[0] && arr[3] === forbidden[0]){
        return 'xxx ghost of xxx navigator'
      } else if (arr[0] === forbidden[1] && arr[1] === forbidden[0]) {
      return 'xxxx xxxx'
    } else {
    }
    
    }
    return text
  }
    



    // üëâ CHALLENGE 5 (bonus, NOT graded)
    function normalizePhoneNumber(num) {

    }

    // üëâ CHALLENGE 6 (bonus, NOT graded)
    function diceRolls() {
 
    }
    </script>

  <style>
    .widget {
      padding: 0 0 0.5rem 0.65rem;
      margin-bottom: 0.5rem;
      border: 1px solid black;
      border-radius: 0.5rem;
    }

    .widget p {
      font-size: 0.75rem;
      font-style: italic;
    }

    .row>div {
      display: inline-block;
      background-color: lightgrey;
      border: 1px solid grey;
      width: 2rem;
      height: 2rem;
      cursor: pointer;
    }

    #outcome {
      font-size: 3rem;
    }

  </style>
</head>

<body>
  <h1>Web Sprint 2 Challenge </h1>
  <p>‚ùó See the last script tag for instructions on completing your Challenge</p>
  <!-- widgets start -->
  <section class="widget">
    <p>Click on a square! (this widget uses the mineSweeper function)</p>
    <div class="row" id="row1">
      <div></div>
      <div></div>
      <div></div>
    </div>
    <div class="row" id="row2">
      <div></div>
      <div></div>
      <div></div>
    </div>
    <div class="row" id="row3">
      <div></div>
      <div></div>
      <div></div>
    </div>
    <span id="outcome"></span>
  </section>
  <form class="widget">
    <p>Type a ten-digit number! (this widget uses the normalizePhoneNumber function)</p>
    <input type="text" id="phoneNumInput" maxlength="10" />
    <span id="normalized"></span>
  </form>
  <!-- widgets end -->

  <!-- The first script tag loads a library called lodash that helps with testing -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
  <script>
    // üß™ TESTS, do not make any changes below this line ===================
    // üß™ TESTS, do not make any changes below this line ===================
    // üß™ TESTS, do not make any changes below this line ===================
    globalThis.challengeVersion = 1
    globalThis.profileActivation = profileActivation
    globalThis.mineSweeper = mineSweeper
    globalThis.booleanize = booleanize
    globalThis.scrub = scrub
    globalThis.normalizePhoneNumber = normalizePhoneNumber

    try {
      runTests('CHALLENGE 1 - profileActivation', profileActivation, [
        [[{ active: true }], 'confirm status manually'],
        [[{ active: true }, 'because'], { active: false, reason: 'because' }],
        [[{ active: false, reason: 'because' }], { active: true }],
      ])
      runTests('CHALLENGE 2 - mineSweeper', mineSweeper, [
        [[[["üü•", "üü¶", "üü•"], ["üü¶", "üü•", "üü•"], ["üü•", "üü¶", "üü¶"]], 0, 4], "invalid coordinates"],
        [[[["üü•", "üü¶", "üü•"], ["üü¶", "üü•", "üü•"], ["üü•", "üü¶", "üü¶"]], 0, 1], "invalid coordinates"],
        [[[["üü•", "üü¶", "üü•"], ["üü¶", "üü•", "üü•"], ["üü•", "üü¶", "üü¶"]], 1, 4], "invalid coordinates"],
        [[[["üü¶", "üü¶", "üü•"], ["üü¶", "üü¶", "üü¶"], ["üü¶", "üü¶", "üü•"]], 1, 1], "üü¶ ü•≥"],
        [[[["üü¶", "üü•", "üü¶"], ["üü¶", "üü¶", "üü¶"], ["üü•", "üü¶", "üü•"]], 2, 1], "üü• üíÄ"],
        [[[["üü•", "üü¶", "üü•"], ["üü•", "üü•", "üü¶"], ["üü•", "üü•", "üü¶"]], 3, 1], "üü• üíÄ"],
        [[[["üü•", "üü¶", "üü¶"], ["üü•", "üü¶", "üü•"], ["üü¶", "üü¶", "üü¶"]], 1, 2], "üü• üíÄ"],
        [[[["üü•", "üü•", "üü•"], ["üü•", "üü¶", "üü•"], ["üü¶", "üü•", "üü¶"]], 2, 2], "üü¶ ü•≥"],
        [[[["üü•", "üü¶", "üü¶"], ["üü¶", "üü•", "üü•"], ["üü•", "üü•", "üü¶"]], 3, 2], "üü• üíÄ"],
        [[[["üü•", "üü•", "üü•"], ["üü¶", "üü¶", "üü•"], ["üü•", "üü•", "üü¶"]], 1, 3], "üü• üíÄ"],
        [[[["üü•", "üü¶", "üü•"], ["üü•", "üü•", "üü•"], ["üü•", "üü¶", "üü•"]], 2, 3], "üü¶ ü•≥"],
        [[[["üü•", "üü•", "üü•"], ["üü¶", "üü•", "üü•"], ["üü•", "üü•", "üü¶"]], 3, 3], "üü¶ ü•≥"],
        [[[["üü•", "üü¶", "üü¶"], ["üü•", "üü•", "üü¶"], ["üü•", "üü•", "üü•"]], 1, 1], "üü• üíÄ"],
        [[[["üü•", "üü¶", "üü¶"], ["üü•", "üü•", "üü¶"], ["üü•", "üü•", "üü•"]], 2, 2], "üü• üíÄ"],
        [[[["üü•", "üü¶", "üü¶"], ["üü•", "üü•", "üü¶"], ["üü•", "üü•", "üü•"]], 3, 3], "üü• üíÄ"],
      ])
      runTests('CHALLENGE 3 - booleanize', booleanize, [
        [[{ bad1: null }], {}],
        [[{ bad1: null, bad2: null }], {}],
        [[{ '0123456789': 1 }], 'shorten all prop names to 9 chars or less'],
        [[{ a: 1, b: 1 }], { a: true, b: true }],
        [[{ a: 0, b: 0 }], { a: false, b: false }],
        [[{ a: 1, b: 0, c: null, d: 'Lady Gaga' }], { a: true, b: false, d: 'Lady Gaga' }],
      ])
      runTests('CHALLENGE 4 - scrub', scrub, [
        [["out of the silent planet", ["of", "silent"]], "out xx the xxxxxx planet"],
        [["out of the silent planet", ["of", "planet"]], "out xx the silent xxxxxx"],
        [["the ghost of the navigator", ["the"]], "xxx ghost of xxx navigator"],
        [["lost somewhere in time", []], "lost somewhere in time"],
        [["aces high", ["high", "aces", "hearts"]], "xxxx xxxx"],
        [["", ["high", "aces"]], ""],
      ])
      runTests('CHALLENGE 5 (OPTIONAL) - normalizePhoneNumber', normalizePhoneNumber, [
        [["1234567890"], "(123) 456-7890"],
        [["1111111111"], "(111) 111-1111"],
        [["9876543210"], "(987) 654-3210"],
      ])
      console.log('\nCHALLENGE 6 (OPTIONAL) does not have auto tests')
      function runTests(testName, func, tests) {
        let results = []
        tests.forEach(test => {
          const originalArgsList = _.cloneDeep(test[0])
          const argsList = test[0]
          const expected = test[1]
          const actual = func.apply(null, argsList)
          results.push([argsList, expected, actual, originalArgsList])
        })
        console.log('\n' + testName)
        if (results.every(result => _.isEqual(result[1], result[2]))) console.log('\t‚úÖ All tests pass')
        else if (results.every(result => !_.isEqual(result[1], result[2]))) console.log('\t‚ùå All tests fail')
        else results.forEach((result, idx) => {
          if (_.isEqual(result[1], result[2])) console.log(`\t‚úÖ Test ${idx + 1} passes`)
          else console.log(`\t‚ùå Test ${idx + 1} fails:
        ${func.name}(${result[3].map(JSON.stringify)})
        üëâ should return ${JSON.stringify(result[1])}
        üëâ but returns ${JSON.stringify(result[2])}`)
        })
      }
      const gridElems = [Array.from(row1.children), Array.from(row2.children), Array.from(row3.children)]
      const squares = ["üü•", "üü¶"]
      let grid = [[], [], []]
      gridElems.forEach((row, idxRow) => {
        row.forEach((square, idxSquare) => {
          const emoji = squares[Math.floor(Math.random() * 2)]
          grid[idxRow].push(emoji)
          if (emoji === squares[0]) square.style.backgroundColor = '#ffecec'
          else square.style.backgroundColor = '#f2f2ff'
          square.onclick = () => {
            const x = idxSquare + 1
            const y = idxRow + 1
            console.log(`\nYou clicked coordinates [${x}, ${y}]`)
            outcome.textContent = mineSweeper(grid, x, y)
          }
        })
      })
      phoneNumInput.oninput = evt => {
        normalized.textContent = normalizePhoneNumber(evt.target.value)
      }
    } catch (err) { console.error(err.stack) }
  </script>
</body>

</html>
